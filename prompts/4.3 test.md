Continuing the GalaPo project. Create tests for the category system.

TECH: Vitest, React Testing Library, MSW v2

REQUIREMENTS:

1. /tests/unit/components/public/CategoryCard.test.tsx:
   - Renders category icon, name, listing count
   - Shows subcategory names (max 5)
   - Shows "+X more" when more than 5 subcategories
   - Links to correct category URL (/olongapo/[slug])
   - Hover effect applies correct classes

2. /tests/unit/components/public/CategorySidebar.test.tsx:
   - Renders subcategory list with counts
   - Clicking subcategory updates filter
   - "All" option resets subcategory filter
   - Barangay checkboxes grouped correctly (Olongapo, SBFZ, Nearby)
   - Checking barangay updates URL params
   - "Open Now" toggle works
   - "Featured Only" toggle works
   - "Clear All" resets all filters
   - Active filters shown as chips

3. /tests/unit/components/public/ViewToggle.test.tsx:
   - Three toggle buttons render (Grid, List, Map)
   - Active view has highlighted style
   - Clicking toggle changes view
   - View preference preserved in URL params

4. /tests/unit/components/public/ListingGrid.test.tsx:
   - Renders listing cards in grid
   - Sponsored listings appear first with badge
   - Featured listings appear after sponsored
   - Regular listings appear last
   - Pagination renders with correct page count
   - Empty state shows when no results

5. /tests/unit/components/public/ListingMapView.test.tsx:
   - Map container renders with correct height
   - Pins render for each listing
   - Clicking pin shows popup with business info
   - Results list renders below map

6. /tests/integration/api/listings.test.ts:
   - Mock Supabase with MSW
   - GET /api/listings returns paginated results
   - Filter by category returns only that category
   - Filter by subcategory works
   - Filter by multiple barangays works (comma-separated)
   - Filter by search keyword matches business_name and tags
   - Sort by "newest" returns newest first
   - Sort by "featured" returns correct order (sponsored > premium > featured > regular)
   - Pagination returns correct page and total
   - Invalid page number returns error
   - GET /api/listings/map returns lightweight data
   - GET /api/top-search/[category] returns active placements

7. /tests/unit/lib/search-helpers.test.ts:
   - parseSearchParams handles all param types correctly
   - parseSearchParams handles missing/invalid params with defaults
   - buildFilterUrl generates correct URL string
   - isOpenNow correctly checks operating hours JSON
   - getActiveDay returns correct PH timezone day

8. /tests/unit/pages/CategoryPage.test.tsx:
   - Renders breadcrumb correctly
   - Renders heading with category name
   - Renders sidebar with filters
   - Renders listing grid by default
   - Switching to list view works
   - Switching to map view works
   - Ad slots render in correct positions
   - SEO metadata is correct
   - Empty state when no listings
   - Loading skeletons show while loading

Output all test files with complete code.